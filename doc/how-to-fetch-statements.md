
По умолчанию период, за который выгребаются выписки устанавливается в значение *prev* - предыдущий квартал. Этот параметр можно установаить как в файле конфигурации *config.yaml*

## Получение выписок


* Воспользоваться [руководством](https://masterbuh.com/ru/feature/masteravtokliyent-privat24-9)  либо [официальной докой](https://www.google.com/url?q=https://docs.google.com/document/d/e/2PACX-1vTion-fu1RzMCQgZXOYKKWAmvi-QAAxZ7AKnAZESGY5lF2j3nX61RBsa5kXzpu7t5gacl6TgztonrIE/pub&sa=D&ust=1609754137862000&usg=AOvVaw2575WmEHG8jTB-lZq5aTz9). Наша цель получить пару **id**/**token**, сам автоклиент инсталлировать ненужно.
* прописать **id**/**token** в конфигурационном файле, который лежит у вас в каталоге *data/[ФОП]/config.yaml*
  ```yaml
  statements:
    pb_id: [тут указываем id]
    pb_token: [тут указываем token]
  ```
* Теперь можно получить выписки (по умолчанию выписки получаются за предыдущий квартал)
  ```
  python main.py fetch-statements
  ```
  В результате в окне вівода должно появитьс чтото на подобии
  ```
  .....
  getting statements for period 2020-10-01 - 2020-12-31
  72 statements stored in 2020-10-01 -- 2020-12-31.xlsx
  ```
  Результирующий файл будет лежать в *data/[ФОП]/data_in* для последующей обработки коммандой **process**


## Настройка
Настройки производятся в файле *config.yaml*
```yaml
.......
statements:
  ignore_accounts: ['UA..{6}.000002603.*']
  period:
    value: prev
    start:
    end:
.......
```
Где  
*ignore_accounts* - массив счетов, которые не включать в результирующую выборку. **2603*** является распределительным счетом.

*period.value* - Период, за который производить выборку (квартал). Допустимые значения:  
 * prev - предыдущий квартал
 * по паттерну QQ.YYYY, QQ-YYYY, YYYY.QQ, YYYY-QQ где QQ - Номер квартала в десятичной либо римской нотации, YYYY - год.   Например  
   *i.2020, iii.2020, iv.2020,  1.2020, 4.2020, i-2020, ii-2020, 1-2020, 4-2020*  
   *2020.i, 2020.iii, 2020.iv,  2020.1, 2020.4, 2020-i, 2020-ii, 2020-1, 2020-4*  
Параметр может быть переопределен в коммандной строке параметром *--period* либо в переменных окружения *BSTMT_PERIOD*

*period.start* - дата начала выборки в международном формате YYYY-MM-DD.  
Параметр может быть переопределен в коммандной строке параметром *--period-start* либо в переменных окружения *BSTMT_PERIOD_START*

*period.end* - дата конца выборки в международном формате YYYY-MM-DD
Параметр может быть переопределен в коммандной строке параметром *--period-end* либо в переменных окружения *BSTMT_PERIOD_END*

## Примеры

* Получить выписки за предыдущий квартал
  ```
  python main.py --period prev fetch-statements 
  ```
* Получить выписки за первый квартал 2020 года
  ```
  python main.py --period 2020-i fetch-statements 
  ```
* Получить выписки за четвертый квартал 2020 года
  ```
  python main.py --period 2020-4 fetch-statements 
  ```
* Получить выписки за весь 2020 год
  ```
  python main.py --period-start 2020-01-01 --period-end 2020-12-31 fetch-statements 
  ```